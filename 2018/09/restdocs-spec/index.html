<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="/css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title>Generate OpenAPI Specs with Spring REST Docs</title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
  

  
  <link href="/favicon.png" rel="icon">

  
  

  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="author" content="Kyle Lieber">

  
  <meta name="generator" content="Hugo 0.54.0" />

  
  

  
  

</head>
<body>


<header role="banner">
<hgroup>
  
  <h1><a href="/">Kyle Lieber</a></h1>
    <h2>some things I felt like writing about...</h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
      
        <option value="/">» Blog</option>
      
        <option value="/categories/development">» Development</option>
      
        <option value="https://www.linkedin.com/in/kylelieber">» Resume</option>
      
        <option value="https://github.com/BerkleyTechnologyServices/restdocs-spec">» Restdocs Spec Maven Plugin</option>
      
        <option value="/phantomjs-maven-plugin">» PhantomJS Maven Plugin</option>
      
  </select>
</fieldset>


<ul class="main-navigation">
  
  
    
      <li><a href="/" title="Blog">Blog</a></li>
    
  
    
      <li><a href="/categories/development" title="Development" >Development</a></li>
    
  
    
      <li><a href="https://www.linkedin.com/in/kylelieber" title="Resume" >Resume</a></li>
    
  
    
      <li><a href="https://github.com/BerkleyTechnologyServices/restdocs-spec" title="Restdocs Spec Maven Plugin" >Restdocs Spec Maven Plugin</a></li>
    
  
    
      <li><a href="/phantomjs-maven-plugin" title="PhantomJS Maven Plugin" >PhantomJS Maven Plugin</a></li>
    
  
</ul>

<ul class="subscription">
  
    
        <a href="/index.xml" target="_blank" type="application/rss+xml" title="RSS"><i class="fa fa-rss-square fa-lg"></i></a>
    
  

</ul>


<form action="https://www.google.com/search" method="get" target="_blank" style="padding-top: 4px;">
  <fieldset role="search">
  	<input class="search" type="text" name="q" results="0" placeholder="Search"/>
    <input type="hidden" name="q" value="site:/" />
  </fieldset>
</form>

</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
    <p class="meta">Sep 21, 2018
         - 3 minute read 
        

        
        
            - <a class="label" href="/categories/development/">Development </a>
        
    </p>
    <h1 class="entry-title">
         Generate OpenAPI Specs with Spring REST Docs 
    </h1>
</header>


        <div class="entry-content">
          
          
          
          <p>Many of the teams at my organization began using Spring REST Docs to document our REST APIs over the last couple of years.  We really like the freedom it gives you to design your documentation as you wish while still giving you reliable snippets that are validated through tests.  Of course, the only thing its missing is the ability to generate an API specification document like OpenAPI.  This recently became a requirement that we are able to provide such a document so many thought we would need to abandon Spring REST Docs.</p>

<p>Fortunately, we have been having regular &ldquo;hack days&rdquo; to take some time away from our day-to-day work and attack problems we would otherwise never get to work on.  Last month, a couple of us decided to tackle the challenge of coming up with a way to generate OpenAPI specs using Spring REST Docs.</p>

<p>Our approach was simple.  Basically, we decided the easiest thing to do would be to follow the same model Spring REST Docs already uses for generating HTML sites.  It&rsquo;s a two step process:</p>

<ol>
<li>Generate snippet files during the run of your tests.  Usually asciidoc files.</li>
<li>After the test run, use a maven plugin to join all those snippet files into an HTML site.  Usually the asciidoctor-maven-plugin.</li>
</ol>

<p>So, we would follow that same process only instead of generate asciidoc files for our snippets we would generate a json file that contained all the information about the resource.  The instead of using the asciidoctor-maven-plugin to join everything together we would create our own plugin that would read in all the json files and spit out an OpenAPI spec.</p>

<p>At the end of the hack we had a working snippet and plugin that produced a valid OpenAPI spec.  However, we still had a lot of work to do because we were not getting any of the field or parameter documentation in our json snippets so the OpenAPI file that was generated was pretty bare.</p>

<p>Of course, as I&rsquo;ve learned time and time again over my career as a software engineer, you can rarely have a unique idea.  Only a few days after our hack a comment showed up on the <a href="https://github.com/spring-projects/spring-restdocs/issues/213">Spring REST Docs issue</a> that has been open for over two years requesting OpenAPI support. Someone had built a solution to the problem and their solution followed the same basic idea as ours.  The only real difference was that they built a gradle plugin rather than a maven plugin.  The other difference is that they had been working on it for quite a few months now so their snippet was much more advanced than what we had wrote at that point.</p>

<p>So, after getting over my frustration that my cool unique idea was not at all unique I decided that this was really a great thing.  This developer had a snippet that could generate everything we needed and we had a maven plugin which they did not have.  So, we decided best thing to do was to work together to help improve their project and contribute a maven plugin that was compatible with it.</p>

<p>The end result is the <a href="https://github.com/BerkleyTechnologyServices/restdocs-spec">restdocs-spec-maven-plugin</a>.  This plugin works in conjuction with the <a href="https://github.com/ePages-de/restdocs-openapi">restdocs-openapi</a> which is maintained by <a href="https://github.com/mduesterhoeft">Mathias Düsterhöft</a> and his organization.  I won&rsquo;t get into the specifics of how to use them both here in this blog post because both projects have that information in their respective README files.</p>

<p>I also want to thank Mathias for being so friendly and open to my contributions.  That is what the open source community is all about!</p>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">Kyle Lieber</span></span>
    
    <time>Sep 21, 2018</time>
    
      <span class="categories">
        Tags:
        
          <a class="category" href="/tags/java">java</a>  <a class="category" href="/tags/rest">rest</a>  <a class="category" href="/tags/spring">spring</a>  <a class="category" href="/tags/spring-restdocs">spring-restdocs</a>  <a class="category" href="/tags/openapi">openapi</a>  <a class="category" href="/tags/maven">maven</a>  
    
    </span>
  </p>

  

  <p class="meta">
    
        <a class="basic-alignment left" href="/2016/04/angular-transclude-directive-and-ng-if/" title="Angular transclude directive and ng-if">Angular transclude directive and ng-if</a>
    

    
  </p>
  
</footer>

      </article>
    </div>
    


<aside class="sidebar thirds">

  <section class="first odd">
    <div class="gravatar-infobox">
    <img src="//www.gravatar.com/avatar/cf2339ab14f00498a8f3a1f91e3469a7?s=100" alt="Gravatar of Kyle Lieber " title="Gravatar of Kyle Lieber">

      I'm a software developer living in Des Moines, IA. I enjoy working on open source projects and learning new technologies.

    </div>
    
  </section>

  


  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
    
      <a target="_blank" href="https://github.com/klieber/" title="https://github.com/klieber/">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-github fa-stack-1x"></i>
        </span>
      </a>
    
    
      <a target="_blank" href="https://bitbucket.org/klieber/" title="https://bitbucket.org/klieber/">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-bitbucket fa-stack-1x"></i>
        </span>
      </a>
    
    
      <a target="_blank" href="https://stackoverflow.com/users/1190144/kyle" title="https://stackoverflow.com/users/1190144/kyle">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-stack-overflow fa-stack-1x"></i>
        </span>
      </a>
    
    
      <a target="_blank" href="https://www.linkedin.com/in/kylelieber" title="https://www.linkedin.com/in/kylelieber">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-linkedin fa-stack-1x"></i>
        </span>
      </a>
    
    
    
    
      <a target="_blank" href="https://twitter.com/kylelieber/" title="https://twitter.com/kylelieber/">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
      </a>
    
    
     

    
    
    </li>
  </ul>

  
  <section class="even">
    <h1>Recent Posts</h1>

    
    <ul id="recent_posts">
      
      
      
      <li class="post">
        <a href="/2018/09/restdocs-spec/">Generate OpenAPI Specs with Spring REST Docs</a>
      </li>
      
      <li class="post">
        <a href="/2016/04/angular-transclude-directive-and-ng-if/">Angular transclude directive and ng-if</a>
      </li>
      
      <li class="post">
        <a href="/2014/05/phantomjs-maven-plugin-0-dot-3/">PhantomJS Maven Plugin 0.3</a>
      </li>
      
      <li class="post">
        <a href="/2013/03/jasmine-maven-plugin-1-3-1-0-my-first-release/">Jasmine Maven Plugin 1.3.1.0 - My First Release</a>
      </li>
      
      <li class="post">
        <a href="/2012/06/maven-versioning-strategy/">Maven Versioning Strategy</a>
      </li>
      
    </ul>
  </section>
  

  <section class="odd">
    <h1>Tags</h1>
    <span id="tag-cloud">
      
      
        <a style="font-size: 54.107142857142854%" href="/tags/angular">angular</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/apache-cxf">apache-cxf</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/best-practice">best-practice</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/jasmine">jasmine</a>
      
        <a style="font-size: 58.214285714285715%" href="/tags/java">java</a>
      
        <a style="font-size: 62.32142857142857%" href="/tags/javascript">javascript</a>
      
        <a style="font-size: 70.53571428571428%" href="/tags/maven">maven</a>
      
        <a style="font-size: 58.214285714285715%" href="/tags/open-source">open-source</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/openapi">openapi</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/release">release</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/rest">rest</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/spring">spring</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/spring-restdocs">spring-restdocs</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/testing">testing</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/versioning">versioning</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/web-services">web-services</a>
      
        <a style="font-size: 54.107142857142854%" href="/tags/wsdl">wsdl</a>
      
    </span>
  </section>

  
  <section class="first even">
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
    
    <a href="https://github.com/klieber">@klieber</a> on GitHub
    
    <script type="text/javascript" src="/libs/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = '/libs/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'klieber',
              count:  5 ,
              skip_forks:  false ,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="/github/github.js" type="text/javascript"> </script>
  </section>
  

</aside>

  </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2019 Kyle Lieber - <a href="/license/">License</a> -
  <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
</p>

</footer>






<script>
  var _gaq=[['_setAccount','UA-52118741-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

